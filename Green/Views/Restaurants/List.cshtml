
@{
    ViewBag.Title = "Manage Restaurants";
    Layout = "~/Views/Shared/_Layout.cshtml";

}

<div id="restaurants">
    <h2>Restaurants List</h2>
    <div class="form-inline">
        <input type="button" value="Add new restaurant" class="btn btn-primary" data-toggle="modal" data-trigger="focus" data-target="#restaurantItem" data-bind="click:add" />
        <button type="button" class="btn btn-info" data-container="body" data-toggle="popover" data-trigger="focus" data-placement="right" data-content="You can add new restaurants or edit existing ones."  aria-describedby="popover354581">
            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
        </button>
    </div>
    <div id="warningModal" class="modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">WARNING</h4>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete this restaurant?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal" data-bind="click:deleteRestaurant" >Delete</button>
                </div>
            </div>
        </div>
    </div>
    <br />
    <div>
        <label id="warning" class="text-danger pull-right" data-bind="text:messageText"></label>
    </div>
    <table class="table">
        <thead>
            <tr>
                <th>Name</th>
                <th>Type</th>
                <th>Address</th>
                <th>Seats Available</th>
                <th>Opening Hour</th>
                <th>Closing Hour</th>
                <th>Menu</th>
                <th></th>
                <th></th>
                <th></th>
            </tr>
        </thead>
        <tbody data-bind="foreach:Restaurants">
            <tr>
                <td class="col-xs-2" data-bind="text:Name"></td>
                <td class="col-xs-2" data-bind="text:TypeDisplay"></td>
                <td class="col-xs-4" data-bind="text:Address"></td>
                <td class="col-xs-2" data-bind="text:SeatsAvailable"></td>
                <td class="col-xs-1" data-bind="text:OpeningHour"></td>
                <td class="col-xs-1" data-bind="text:ClosingHour"></td>

                <td class="col-xs-1">
                    <button type="button" class="btn btn-success" aria-label="Left Align" data-toggle="modal" data-target="#menuItem" data-bind="click:$parent.manage">
                        <span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span>
                    </button>
                </td>
                <td class="col-xs-1">
                    <button type="button" class="btn btn-info" aria-label="Left Align" data-toggle="modal" data-target="#restaurantItem" data-bind="click:$parent.details">
                        <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                    </button>
                </td>
                <td class="col-xs-1">
                    <button type="button" class="btn btn-danger" aria-label="Left Align" data-toggle="modal" data-target="#warningModal" data-bind="click:$parent.openDeleteDialog" >
                        <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                    </button>
                </td>
                <td class="col-xs-1">
                    <button type="button" class="btn btn-primary" aria-label="Left Align" data-toggle="modal" data-target="#imageItem" data-bind="click:$parent.openShowImage">
                        <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                    </button>
                </td>
               
            </tr>
        </tbody>
    </table>
   
    @Html.Partial("Item")
    @Html.Partial("Menu")
    @Html.Partial("Image")
</div>
<script>
    $(function () {
        var vm = new Restaurants();
        vm.refresh();
        ko.applyBindings(vm, $("#restaurants").get(0));
    });
    $(document).ready(function () {
        $('[data-toggle="popover"]').popover();
    });

</script>
